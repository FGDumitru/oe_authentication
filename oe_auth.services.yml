parameters:
  p_cas:
    base_url: http://127.0.0.1:8000
    protocol:
      login:
        path: /login
        query: []
        allowed_parameters:
          - service
          - renew
          - gateway
      servicevalidate:
        path: /serviceValidate
        query: []
        allowed_parameters:
          - service
          - ticket
          - pgtUrl
          - renew
          - format
      logout:
        path: /logout
        query: []
        allowed_parameters:
          - service

services:
  oeauth.authentication:
    class: \Drupal\oe_auth\Authentication\Provider\OeAuth
    arguments: ['@pcas.factory', '@oeauth.userprovider']
    tags:
      - { name: authentication_provider, provider_id: 'oeauth', priority: -10, global: TRUE }

  oeauth.userprovider:
    class: \Drupal\oe_auth\UserProvider
    arguments: ['@entity_type.manager']

  oeauth.route_subscriber:
    class: \Drupal\oe_auth\Routing\RouteSubscriber
    tags:
      - { name: event_subscriber }

  pcas.factory:
      class: OpenEuropa\pcas\PCasFactory
      arguments: ['@session', '%p_cas%']
